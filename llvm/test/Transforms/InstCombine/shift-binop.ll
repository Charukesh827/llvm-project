; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

define i8 @src1(i8 %arg0) {
; CHECK-LABEL: @src1(
; CHECK-NEXT:    [[SHL:%.*]] = shl nuw i8 [[ARG0:%.*]], 1
; CHECK-NEXT:    [[OUTMAX:%.*]] = call i8 @llvm.umax.i8(i8 [[SHL]], i8 16)
; CHECK-NEXT:    ret i8 [[OUTMAX]]
;
  %1 = call i8 @llvm.umax.i8(i8 %arg0, i8 1)
  %2 = shl nuw i8 %1, 1
  %3 = call i8 @llvm.umax.i8(i8 %2, i8 16)
  ret i8 %3
}

define i8 @src2(i8 %arg0) {
; CHECK-LABEL: @src2(
; CHECK-NEXT:    [[INMAX:%.*]] = call i8 @llvm.umax.i8(i8 [[ARG0:%.*]], i8 4)
; CHECK-NEXT:    [[SHL:%.*]] = shl nuw i8 [[INMAX:%.*]], 1
; CHECK-NEXT:    [[OUTMAX:%.*]] = call i8 @llvm.umax.i8(i8 [[SHL]], i8 10)
; CHECK-NEXT:    ret i8 [[OUTMAX]]
;
  %1 = call i8 @llvm.umax.i8(i8 %arg0, i8 4)
  %2 = shl nuw i8 %1, 1
  %3 = call i8 @llvm.umax.i8(i8 %2, i8 10)
  ret i8 %3
}

declare i8 @llvm.umax.i8(i8, i8)
